# ワークフロー

## ワークフロー

ロボットが起動されると、ワークフローの設定を実行し始めます。ワークフローは、

### タスク

セッションが実行されると、順番にタスクが実行されます。Yamlファイル上では、 `+[task_name]:` という `+` から始まる形式でタスクは定義されます。タスクの中には、何かを実行するアクションタスクとワークフロー自体を動的に変更するコントロールタスクがあります。

### アクション

ロボットが実行されると、上から順番に（つまり書いた順番に）タスクが処理されていきます。処理されるタスクがアクションタスクの場合、ロボットは、マウスやキーボード、あるいは、APIを叩くなど何らかの操作行います。アクションは、複数のインプット（パラメーター）を受け取り、実行結果として一つのアウトプットを生成します。生成したアウトプットは、それ以降のアクションで、`'+[task_name]'` という文字列を与えることで再利用することができます。

### コントロール

ifの条件分岐、for\_each、loopの繰り返しに使うタスクは、タスクが実行されるタイミングで、後続のタスクを生成します（あるいは、生成しません）。コントロールタスクは、アウトプットの再利用をサポートしていません。コントロールタスクで動的な値を渡すには、変数を使う必要があります。変数については、別のセクションで解説しています。

### Teardown

タスクが、成功・失敗問わず完了した際には、Teardownアクションが実行されます。Teardownアクションは、自動的に実行されるアクションで、特に設定は不要です。Teardownアクションは、セッションの成功と失敗を登録するだけのアクションです。

### ワークフローの完了

ワークフローが完了すると、次の処理を試行します。

* ワークフローが失敗ステータスの場合、失敗通知メールを送信します
* 成功・失敗にかかわらず、溜まっているキューがあれば処理を開始します

